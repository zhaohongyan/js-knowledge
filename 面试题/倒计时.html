<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Document</title>
  </head>

  <body>
    <input type="text" id="serverTime" value="2017-06-14 15:09:10" />
    <input type="text" id="dateline" value="2017-06-17 00:00" />
    <h1>
      <span id="t_d"></span>
      <span id="t_h"></span>
      <span id="t_m"></span>
      <span id="t_s"></span>
    </h1>
    <script>
      var dateline = document.getElementById("dateline").value;
      var endTime = dateline + ":00";
      endTime = endTime.replace(/-/g, "/");

      var serverTime = document.getElementById("serverTime").value;
      serverTime = serverTime.replace(/-/g, "/");

      var allow_error = Date.parse(serverTime) - new Date().getTime();

      function GetTime() {
        var t = Date.parse(endTime) - new Date().getTime() - allow_error;
        var d = 0;
        var h = 0;
        var m = 0;
        var s = 0;
        if (t >= 0) {
          d = Math.floor(t / 1000 / 60 / 60 / 24);
          h = Math.floor((t / 1000 / 60 / 60) % 24);
          m = Math.floor((t / 1000 / 60) % 60);
          s = Math.floor((t / 1000) % 60);
        }
        document.getElementById("t_d").innerHTML = d + "天";
        document.getElementById("t_h").innerHTML = h + "时";
        document.getElementById("t_m").innerHTML = m + "分";
        document.getElementById("t_s").innerHTML = s + "秒";
      }

      setInterval(GetTime, 1000);
    </script>
  </body>
</html>
